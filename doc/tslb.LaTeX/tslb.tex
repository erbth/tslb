% !TeX spellcheck = en_US
\documentclass[a4paper]{scrartcl}
\usepackage[left=2cm, right=2cm, top=2cm, bottom=2cm]{geometry}
\usepackage{lmodern}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage{tabularx}
\usepackage[dvipsnames]{xcolor}
\usepackage{dirtree}
\usepackage[hidelinks]{hyperref}
\usepackage{algpseudocode}
\usepackage{algorithm}
\usepackage{algorithmicx}
\usepackage{tikz}
\usetikzlibrary{automata, positioning, arrows, shapes.geometric}

\newcommand{\file}[1]{\texttt{#1}}
\newcommand{\program}[1]{\textbf{#1}}
\newcommand{\variable}[1]{'\texttt{#1}'}
\newcommand{\module}[1]{\texttt{#1}}
\newcommand{\script}[1]{\texttt{#1}}

\newcommand{\python}[1]{\texttt{`#1'}}

\newcommand{\green}[1]{\textcolor{green}{#1}}

\title{The TSClient LEGACY Build System}
\subtitle{Developer's documentation}
\author{Thomas Erbesdobler <t.erbesdobler@gmx.de>}

\begin{document}
	\maketitle
	\tableofcontents
	
	\pagebreak
	
	\section{Source package attributes}
	\label{sec:source_package_attributes}
	
	\begin{tabularx}{\textwidth}{llX}
		Command & Typical type & Description \\
		\hline
		upstream\_source\_url & str & URL from which the upstream source tarball can be downloaded \\\
	\end{tabularx}
	
	\subsection{Attributes of a specific version}
	\label{sec:source_package_version_attributes}
	
	\begin{tabularx}{\textwidth}{llX}
		Command & Typical type & Description \\
		\hline
		configure\_command & str & \\
		build\_command & str & \\
		install\_to\_destdir\_command & str & \\
		skip\_rdeps & str & Optionally skip adding rdeps (parsed into bool) \\
		disable\_python\_compileall & str & \\
		adapt\_command & str & \\
		additional\_file\_placement & List(Tuple(str, str|List(str))) & [(dst pkg name, regex | [regex])]\\
		additional\_rdeps & List(Tuple(str,DependencyList)) & \\
		cdeps & DependencyList & \\
		tools & DependencyList&  Like cdeps, but only used for rootfs creation \\
		enabled & str & parsed into bool \\
		source\_archive & str|NoneType & \\
		unpack\_command & str & \\
		patch\_command & str & \\
		unpacked\_source\_directory & str & \\
		activated\_triggers & List(Tuple(str, str|List(str))) & \\
		activated\_triggers\_* & List(Tuple(str, str|List(str))) & \\
		interested\_triggers & List(Tuple(str, str|List(str))) & \\
		interested\_triggers\_* & List(Tuple(str, str|List(str))) & \\
		maintainer\_script\_* & str & \\
	\end{tabularx}

	\subsection{\texttt{additional\_rdeps}}
	\label{sec:additional_rdeps}
	
	A version of \texttt{current} (will be translated to \texttt{2184801924} by \python{tslb.VersionNumber}) will be substituted with the binary version of the dependency, which is installed in the rootfs image during compilation. In a similar way \texttt{built} will be substituted by the currently built version number (for internal dependencies).
	
\end{document}